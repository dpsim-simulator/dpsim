FROM fedora:36

LABEL \
	org.opencontainers.image.title = "DPsim" \
	org.opencontainers.image.licenses = "MPL 2.0" \
	org.opencontainers.image.url = "http://dpsim.fein-aachen.org/" \
	org.opencontainers.image.source = "https://github.com/sogno-platform/dpsim"

RUN dnf --assumeyes --refresh update

# Toolchain
RUN dnf --assumeyes install \
	gcc gcc-c++ \
	git \
	make cmake pkgconfig \
	python3-pip

# Dependencies
RUN dnf --assumeyes install \
	python3-devel \
	eigen3-devel \
	spdlog-devel

# Python dependencies
ADD project.toml .
RUN pip3 install --upgrade wheel build
RUN pip3 install .[test,docs]
